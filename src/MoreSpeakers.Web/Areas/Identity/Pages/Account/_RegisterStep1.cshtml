@model MoreSpeakers.Web.Areas.Identity.Pages.Account.RegisterModel

<div class="form-step" data-step="1">
    @if (ViewData["HasValidationErrors"] as bool? == true)
    {
        <div class="alert alert-danger mb-3">
            <i class="bi bi-exclamation-triangle me-2"></i>@ViewData["ValidationMessage"]
        </div>
    }
    @if (ViewData["SuccessMessage"] != null)
    {
        <div class="alert alert-success mb-3">
            <i class="bi bi-check-circle me-2"></i>@ViewData["SuccessMessage"]
        </div>
    }
    <h5 class="mb-4">Account Information</h5>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="Input.FirstName" class="form-label fw-medium">First Name</label>
            <div class="input-group">
                <span class="input-group-text border-end-0">
                    <i class="bi bi-person text-muted"></i>
                </span>
                <input asp-for="Input.FirstName" class="form-control border-start-0"
                       placeholder="Enter your first name"/>
            </div>
            <span asp-validation-for="Input.FirstName" class="text-danger small"></span>
        </div>

        <div class="col-md-6 mb-3">
            <label asp-for="Input.LastName" class="form-label fw-medium">Last Name</label>
            <div class="input-group">
                <span class="input-group-text border-end-0">
                    <i class="bi bi-person text-muted"></i>
                </span>
                <input asp-for="Input.LastName" class="form-control border-start-0" placeholder="Enter your last name"/>
            </div>
            <span asp-validation-for="Input.LastName" class="text-danger small"></span>
        </div>
    </div>

    <div class="mb-3">
        <label asp-for="Input.Email" class="form-label fw-medium">Email Address</label>
        <div class="input-group">
            <span class="input-group-text border-end-0">
                <i class="bi bi-envelope text-muted"></i>
            </span>
            <input asp-for="Input.Email" class="form-control border-start-0" autocomplete="username"
                   placeholder="Enter your email"
                   hx-post="/Identity/Account/Register?handler=ValidateEmail"
                   hx-trigger="blur, keyup changed delay:500ms"
                   hx-target="#email-validation-message"
                   hx-include="this"
                   hx-indicator="#email-spinner"/>
        </div>
        <div class="d-flex align-items-center">
            <span asp-validation-for="Input.Email" class="text-danger small"></span>
            <div id="email-spinner" class="htmx-indicator ms-2">
                <div class="spinner-border spinner-border-sm text-primary" role="status">
                    <span class="visually-hidden">Checking...</span>
                </div>
            </div>
        </div>
        <div id="email-validation-message" class="small mt-1"></div>
    </div>

    <div class="mb-3">
        <label asp-for="Input.PhoneNumber" class="form-label fw-medium">Country Code + Phone Number</label>
        <div class="input-group">
            <span class="input-group-text border-end-0">
                <i class="bi bi-telephone text-muted"></i>
            </span>
            <input asp-for="Input.PhoneNumber" class="form-control border-start-0"
                   placeholder="Enter your phone number with country code"/>
        </div>
        <span asp-validation-for="Input.PhoneNumber" class="text-danger small"></span>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="Input.Password" class="form-label fw-medium">Password</label>
            <div class="input-group">
                <span class="input-group-text border-end-0">
                    <i class="bi bi-lock text-muted"></i>
                </span>
                <input asp-for="Input.Password" class="form-control border-start-0" autocomplete="new-password"
                       placeholder="Create a strong password"/>
            </div>
            <span asp-validation-for="Input.Password" class="text-danger small"></span>
        </div>

        <div class="col-md-6 mb-3">
            <label asp-for="Input.ConfirmPassword" class="form-label fw-medium">Confirm Password</label>
            <div class="input-group">
                <span class="input-group-text border-end-0">
                    <i class="bi bi-shield-check text-muted"></i>
                </span>
                <input asp-for="Input.ConfirmPassword" class="form-control border-start-0" autocomplete="new-password"
                       placeholder="Confirm your password"/>
            </div>
            <span asp-validation-for="Input.ConfirmPassword" class="text-danger small"></span>
        </div>
    </div>
</div>
