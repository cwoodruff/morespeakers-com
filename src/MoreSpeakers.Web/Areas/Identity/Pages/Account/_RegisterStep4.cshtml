@model MoreSpeakers.Web.Areas.Identity.Pages.Account.RegisterModel

<div class="form-step" data-step="4">
    @if (ViewData["HasValidationErrors"] as bool? == true)
    {
        <div class="alert alert-danger mb-3">
            <i class="bi bi-exclamation-triangle me-2"></i>@ViewData["ValidationMessage"]
        </div>
    }
    @if (ViewData["SuccessMessage"] != null)
    {
        <div class="alert alert-success mb-3">
            <i class="bi bi-check-circle me-2"></i>@ViewData["SuccessMessage"]
        </div>
    }
    <h5 class="mb-4">Social Media & Professional Links</h5>
    <p class="text-muted mb-4">Share your professional social media profiles to help others connect with you.</p>

    <div id="socialMediaContainer">
        <div class="row mb-3 social-media-row">
            <div class="col-md-4">
                <select name="Input.SocialMediaPlatforms" class="form-select">
                    <option value="">Select Platform</option>
                    <option value="LinkedIn">LinkedIn</option>
                    <option value="Twitter">Twitter</option>
                    <option value="GitHub">GitHub</option>
                    <option value="YouTube">YouTube</option>
                    <option value="Website">Personal Website</option>
                    <option value="Blog">Blog</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="url" name="Input.SocialMediaUrls" class="form-control" placeholder="https://..."/>
            </div>
            <div class="col-md-2">
                <button type="button" class="btn btn-outline-primary w-100" 
                        onclick="addSocialMediaRow()">
                    <i class="bi bi-plus"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Persist Steps 1-3 values across HTMX steps for final submit -->
<div aria-hidden="true" style="display:none;visibility:hidden;">
    <!-- Step 1 fields -->
    <input type="hidden" asp-for="Input.FirstName" />
    <input type="hidden" asp-for="Input.LastName" />
    <input type="hidden" asp-for="Input.Email" />
    <input type="hidden" asp-for="Input.PhoneNumber" />
    <input type="hidden" asp-for="Input.Password" />
    <input type="hidden" asp-for="Input.ConfirmPassword" />

    <!-- Step 2 fields -->
    <input type="hidden" asp-for="Input.Bio" />
    <input type="hidden" asp-for="Input.Goals" />
    <input type="hidden" asp-for="Input.SessionizeUrl" />
    <input type="hidden" asp-for="Input.HeadshotUrl" />
    <input type="hidden" asp-for="Input.SpeakerTypeId" />

    <!-- Step 3 fields (arrays need multiple hidden inputs) -->
    @if (Model?.Input?.SelectedExpertiseIds != null)
    {
        foreach (var id in Model.Input.SelectedExpertiseIds)
        {
            <input type="hidden" name="Input.SelectedExpertiseIds" value="@id" />
        }
    }
    @if (Model?.Input?.CustomExpertise != null)
    {
        foreach (var ce in Model.Input.CustomExpertise)
        {
            if (!string.IsNullOrWhiteSpace(ce))
            {
                <input type="hidden" name="Input.CustomExpertise" value="@ce" />
            }
        }
    }
</div>

